<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Report PDF</title>
      <link rel="stylesheet" href="../dist/css/report.css">
      <style>
        body { font-family: Helvetica, sans-serif; font-size:13px }
      /* h1 { color: #007bff; } */
      table { border-collapse: collapse; width: 100%;  }
      td, th { border: 1px solid #ccc; padding: 8px; text-align: left;border-collapse: collapse; }
      th { background-color: #f0f0f0;border-collapse: collapse; }
      .warp{
        max-width:100vw;
        
      }
     .container{
      line-height: 12px;
      float:left;
      }
      .elem{
      margin:2px 8px;
      padding:3px;
      width:150px;
      text-align:left;
      line-height: 18px;
      float:left;
      }
      .elemParam{
      margin:2px 8px;
      padding:3px;
      width:90px;
      text-align:left;
      float:left;
      line-height: 18px;
      }
      h2{
        margin:0;
      }
      h4{
        margin:2px
      }
      </style>
  </head>
  <body>
  <div>
    <table>
      <tr>
        <td style="width: 7cm;">
          <h2><%= data.propagation.propagation_name%></h2>
        </td>
        <td style="width: 4cm;">
          Tipo di lotto: <br>Propagation
        </td>
        <td style="width: 4cm;">
          Aggiornato il <br><%= data.propagation.updatedAt %>
        </td>
      </tr>
    </table>
    <div style="display: block; height: 5mm;">

    </div>
    <h2>Dati lotto:</h2>
    <div class="warp">

    
    <div class="container">
      <div class="elem">
        <b>Codice:</b><br><%= data.propagation.code_propagation%>
      </div>
      <div class="elem" style="width:4cm">
        <b>Nome:</b><br><%= data.propagation.propagation_name%>
      </div>
      <div class="elem" style="width:200px">
        <b>Strain:</b><br><%= data.propagation.strain.species_code%> - <%= data.propagation.strain.strain_name%>
      </div>
    </div>
     <div class="container">
      <div class="elem">
        <b>Acquistato:</b><br><%= data.propagation.purchased%>
      </div>
      <div class="elem">
        <b>Acquistato da:</b><br>
        <% if (data.propagation.supplier){%>
        <%= data.propagation.supplier.supplier_name%>
        <% } else { %>
          -
        <% } %>
      </div>
      <div class="elem" style="margin-right: 3cm;">
        <b>Acquistato il:</b><br>
        <% if (data.propagation.purchased_date){%>
        <%= data.propagation.purchased_date%>
        <% } else { %>
          -
        <% } %>
      </div>
      
      
    </div>
    <div class="container">
      
      <div class="elem">
        <b>Contenitore</b><br><%= data.propagation.container.container_name%>
      </div>
      <div class="elem">
        <b>N. contenitori</b><br><%= data.propagation.n_container%>
      </div>
     <div class="elem">
        <b>Substrato</b><br><%= data.propagation.substrate.name_substrate%>
      </div>
    </div>
    <div class="container">
      <div class="elem">
        <b>Qt substrato <%= data.propagation.container.uom %></b><br><%= data.propagation.substrateQt%>
      </div>
      <div class="elem">
        <b>% di Inoculo</b><br><%= data.propagation.strainPerc%>
      </div>
      <div class="elem">
        <b>Qt inoculo <%= data.propagation.container.uom %></b><br><%= data.propagation.strainWeight%>
      </div>
    </div>
    <div class="container">
       <div class="elem">
        <b>Magazzino</b><br><%= data.propagation.storage.name_storage%>
      </div>
      <div class="elem">
        <b>Data scadenza</b><br><%= data.propagation.exp_date%>
      </div>
     <div class="elem" style="width: 6cm;">
        <b>Data prevista maturazione</b><br><%= data.propagation.expected_maturation_date%>
      </div>
    </div>
    </div>
    <div class="container" style="width: 100%;">
    <% if (data.seeds.length>0){%>
    <h3 class="container" style="width: 100%; margin-bottom:0px; margin-bottom: 3mm;">Seeds</h3>  
      <table class="table">
        <thead>
          <tr>
            <th style="width:4cm">Codice</th>
            <th>Percentuale usata</th>
          </tr>
        </thead>
        <tbody>
          <% data.seeds.forEach (el => {%>
          <tr>
            <td ><%= el.mushElementCode%></td>
            <td ><%= el.perc%> %</td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
    </div>

    
    <h3 class="container" style="width: 100%; margin-bottom:3mm;">Elementi</h3>  
    <% if (data.propagation.mushElements.length>0){%>
      <table class="table">
        <thead>
          <tr>
            <th style="width:4cm">Codice</th>
            <th style="width:2cm; text-align: center;">Raccolto</th>
            <th style="width:1.5cm; text-align: center;">Stato</th>
            <th style="width:6cm; text-align: center;">Magazzino</th>
            <th style="width:5cm; text-align: center;">Prelievo</th>
            <th style="width:2cm; text-align: center;">% avanzo</th>
          </tr>
        </thead>
        <tbody>

          <% data.propagation.mushElements.forEach (el => {%>
            
             <tr>
            <td >
              <% if (el.active==1){%>
             <span style="color:#1a9136"> <%= el.element_code%> </span>
             <% } else {%>
             <span style="color:#911a1a"> <%= el.element_code%> </span>
             <% } %>
              </td>
              <td style="text-align: center;"><%= el.totHarvest%> g</td>
            <td style="text-align: center;"><%= el.stato%></td>
            <td style="text-align: center;"><% if (el.active==1){%>
           <%= el.storage.name_storage%>
           <% } else{%>
            --
            <% } %>
          </td>
            <td style="text-align: center;">
              <% if (el.pickReaso){%>
                <%= el.pickReason%>
              <% } else { %>
                --
              <% } %>
              </td>

            <td style="text-align: center;"> <%= el.perc%> % </td>
          </tr>
          <% }) %>
          
        </tbody>
      </table>
    <% } %>
   
    </div>
  </body>
</html>